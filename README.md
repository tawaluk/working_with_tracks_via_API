# working_with_tracks_via_API

[![Python](https://img.shields.io/badge/Python-3.10-blue.svg)](https://www.python.org/)

## Описание

### Тестовое задание - приложение.

### ТЗ:
WEB Сервис для управления маршрутами
Напишите сервис веб сервис (API), который будет управлять маршрутами :

Основной функционал:
Пользователь может создать маршрут из точки А(координаты) в точку Б(координаты), также время отправления, название маршрута
Сервис должен рассчитать примерное время в пути, которое займет данный маршрут (оптимальное), а также сам маршрут (точки и их координаты)
- отдать при создании маршрута (время в пути и сам маршрут получить в маршрутизаторе см стек)
Также пользователь может посмотреть свои маршрут
Пользователь может задать фактическое время прибытия
В приложении должна быть возможность посмотреть статистику с фильтрацией по дням недели - среднее время отклонения, пройдённое
расстояние, время в пути, средняя скорость
Для расчетов маршрута использовать сервис - https://openrouteservice.org/dev/#/api-docs/v2/

Стек:
Фреймворки (один из): Django (DRF), FastApi, Flask
Работа с базой: DjangoORM, SqlAlchemy, чистые SQL запросы
База данных: Любая SQL СУБД
Документация: Желательно Swagger, можно Redoc
Маршрутизация - https://openrouteservice.org/dev/#/api-docs/v2/
Все исходники (код проекта, возможно docker-файлы для запуска контейнеров) разместить в github. В ReadMe указать инструкцию по разворачиванию
проекта

### Реализовано:
WEB сервис использует стек: Python3, FastAPI+Sqlalchemy, PostgreSQL.
3 api-поинта:
- create_a_track (POST) : позволяет произвести базовые расчеты трека. Трек сохраняется в СУБД PostgreSQL.
- user_tracks (GET) : позволяет получить список всех треков ползователя в развернутом виде.
- calculate_statistics (GET) : позволяет получить статистику треков по дням недели.

### Технические решения и особенности:

WEB сервис расчитан на нагрузку I/O до ~100 запросов в секунду. И до ~5 гигабайт данных в СУБД ( Демонстрационная PostgreSQL на VDS ).
При необходимости масштабирования необходим рефакторинг в сторону async.
Для валидации применены pydantic-схемы.
Для работы с SQLAlchemy был выбран декларатианый подход. Написаны необходимые функции, реализующие ORM.
Для ознакомления с web-приложением в Swagger-документации имеются все небоходимые сущности.

## Настройка окружения и запуск:
Ознакомление в приложкнием подразумевает 2 подхода:
1. Клонирование репозитория, установка зависимостей и непосредственный запуск приложения на Вашем хосте ( Потребуется только Python3.10 ).

клонирование репозитория
   ```bash
   git clone https://github.com/tawaluk/working_with_tracks_via_api.git
   ```
перемещение в дирректорию с проектом

   ```bash
   cd working_with_tracks_via_api/src/
   ```
установка необходимых библиотек. ( вариативно: при необходимости можно предварительно создать отдельное виртуальное окружение )

   ```bash
   pip install -r requirements.txt
   ```
запуск приложения через uvicorn

   ```bash
   python3 main.py
   ```
Приложение запустится и полностью готово в тестовом варианте.
Для полноценной работы необходимо создать api-token на сайте
https://openrouteservice.org


2. Клонирование репозитория и запуск приложения через docker ( потребуется установка данной службы/демона на Вашем хосте ).
